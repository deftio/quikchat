{"version":3,"file":"quikchat.umd.js","sources":["../src/quikchat.js"],"sourcesContent":["// quikchat.js\n\nclass quikchat {\n    constructor(parentElement, meta = { theme: 'quikchat-theme-light', onSend: () => { } }) {\n        this.parentElement = parentElement;\n        this.theme = meta.theme;\n        this.onSend = meta.onSend ? meta.onSend : () => { };\n        this.createWidget();\n        // title area\n        if (meta.titleArea) {\n            this.titleAreaSet(meta.titleArea.title, meta.titleArea.align);\n            if (meta.titleArea.show) {\n                this.titleAreaShow();\n            } else {\n                this.titleAreaHide();\n            }\n        }\n        this.attachEventListeners();\n    }\n\n    createWidget() {\n        const widgetHTML =\n            `\n            <div class=\"quikchat-base ${this.theme}\">\n                <div class=\"quikchat-title-area\">\n                    <span style=\"font-size: 1.5em; font-weight: 600;\">Title Area</span>\n                </div>\n                <div class=\"quikchat-messages-area\"></div>\n                <div class=\"quikchat-input-area\">\n                    <textarea class=\"quikchat-input-textbox\"></textarea>\n                    <button class=\"quikchat-input-send-btn\">Send</button>\n                </div>\n            </div>\n            `;\n\n        this.parentElement.innerHTML = widgetHTML;\n        this.chatWidget = this.parentElement.querySelector('.quikchat-base');\n        this.titleArea = this.chatWidget.querySelector('.quikchat-title-area');\n        this.messagesArea = this.chatWidget.querySelector('.quikchat-messages-area');\n        this.inputArea = this.chatWidget.querySelector('.quikchat-input-area');\n        this.textEntry = this.inputArea.querySelector('.quikchat-input-textbox');\n        this.sendButton = this.inputArea.querySelector('.quikchat-input-send-btn');\n    }\n\n    attachEventListeners() {\n        this.sendButton.addEventListener('click', () => this.onSend(this, this.textEntry.value.trim()));\n        window.addEventListener('resize', () => this.handleContainerResize());\n        this.chatWidget.addEventListener('resize', () => this.handleContainerResize());\n    }\n\n    titleAreaToggle() {\n        this.titleArea.style.display === 'none' ? this.titleAreaShow() : this.titleAreaHide();\n    }\n\n    titleAreaShow() {\n        this.titleArea.style.display = '';\n        this.adjustMessagesAreaHeight();\n    }\n\n    titleAreaHide() {\n        this.titleArea.style.display = 'none';\n        this.adjustMessagesAreaHeight();\n    }\n\n    titleAreaSet(title, align = 'center') {\n        this.titleArea.textContent = title;\n        this.titleArea.style.textAlign = align;\n    }\n\n    titleAreaGet() {\n        return this.titleArea.textContent;\n    }\n\n    inputAreaToggle() {\n        this.inputArea.classList.toggle('hidden');\n        this.inputArea.style.display === 'none' ? this.inputAreaShow() : this.inputAreaHide();\n    }\n\n    inputAreaShow() {\n        this.inputArea.style.display = '';\n        this.adjustMessagesAreaHeight();\n    }\n\n    inputAreaHide() {\n        this.inputArea.style.display = 'none';\n        this.adjustMessagesAreaHeight();\n    }\n\n    adjustMessagesAreaHeight() {\n        const hiddenElements = [...this.chatWidget.children].filter(child => child.classList.contains('hidden'));\n        const totalHiddenHeight = hiddenElements.reduce((sum, child) => sum + child.offsetHeight, 0);\n        const containerHeight = this.chatWidget.offsetHeight;\n        this.messagesArea.style.height = `calc(100% - ${containerHeight - totalHiddenHeight}px)`;\n    }\n\n    handleContainerResize() {\n        this.adjustMessagesAreaHeight();\n        this.adjustSendButtonWidth();\n        console.log('Container resized');\n    }\n\n    adjustSendButtonWidth() {\n        const sendButtonText = this.sendButton.textContent.trim();\n        const fontSize = parseFloat(getComputedStyle(this.sendButton).fontSize);\n        const minWidth = fontSize * sendButtonText.length + 16;\n        this.sendButton.style.minWidth = `${minWidth}px`;\n    }\n\n    addMessage(message, user = \"foo\", align = 'left') {\n        const messageDiv = document.createElement('div');\n        messageDiv.classList.add('quikchat-message');\n        messageDiv.classList.add(this.messagesArea.children.length % 2 === 1 ? 'quikchat-message-1' : 'quikchat-message-2');\n\n        const userDiv = document.createElement('div');\n        userDiv.textContent = user;\n        userDiv.style = `width: 100%; text-align: ${align}; font-size: 1em; font-weight:700; color: #444;`;\n\n        const contentDiv = document.createElement('div');\n        contentDiv.style = `width: 100%; text-align: ${align};`;\n        contentDiv.textContent = message;\n\n        messageDiv.appendChild(userDiv);\n        messageDiv.appendChild(contentDiv);\n        this.messagesArea.appendChild(messageDiv);\n        this.messagesArea.lastChild.scrollIntoView();\n\n        this.textEntry.value = '';\n        this.adjustMessagesAreaHeight();\n    }\n\n    removeMesssage(n) {\n        this.messagesArea.removeChild(this.messagesArea.children[n]);\n    }\n\n    getMessage(n) {\n        return this.messagesArea.children[n].lastChild.textContent;\n    }\n\n    appendMessage(n, message) {\n        this.messagesArea.children[n].lastChild.textContent += message;\n    }\n\n    updateMessage(n, message) {\n        this.messagesArea.children[n].lastChild.textContent = message;\n    }\n\n    changeTheme(newTheme) {\n        this.chatWidget.classList.remove(this.theme);\n        this.chatWidget.classList.add(newTheme);\n        this.theme = newTheme;\n    }\n}\n\nexport default quikchat;\n"],"names":["quikchat","parentElement","meta","arguments","length","undefined","theme","onSend","_classCallCheck","createWidget","titleArea","titleAreaSet","title","align","show","titleAreaShow","titleAreaHide","attachEventListeners","_createClass","key","value","widgetHTML","concat","innerHTML","chatWidget","querySelector","messagesArea","inputArea","textEntry","sendButton","_this","addEventListener","trim","window","handleContainerResize","titleAreaToggle","style","display","adjustMessagesAreaHeight","textContent","textAlign","titleAreaGet","inputAreaToggle","classList","toggle","inputAreaShow","inputAreaHide","hiddenElements","_toConsumableArray","children","filter","child","contains","totalHiddenHeight","reduce","sum","offsetHeight","containerHeight","height","adjustSendButtonWidth","console","log","sendButtonText","fontSize","parseFloat","getComputedStyle","minWidth","addMessage","message","user","messageDiv","document","createElement","add","userDiv","contentDiv","appendChild","lastChild","scrollIntoView","removeMesssage","n","removeChild","getMessage","appendMessage","updateMessage","changeTheme","newTheme","remove"],"mappings":"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"}