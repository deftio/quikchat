{"version":3,"file":"quikchat.umd.js","sources":["../src/quikchat.js"],"sourcesContent":["\nclass quikchat {\n    /**\n     * \n     * @param string or DOM element  parentElement \n     * @param {*} meta \n     */\n    constructor(parentElement, onSend = () => { }, options = {}) {\n        const defaultOpts = {\n            theme: 'quikchat-theme-light',\n            trackHistory: true,\n            titleArea: { title: \"Chat\", show: false, align: \"center\" },\n            messagesArea: { alternating: true },\n            inputArea: { show: true },\n            sendOnEnter: true,\n            sendOnShiftEnter: false\n        };\n        const meta = { ...defaultOpts, ...options }; // merge options with defaults\n\n        if (typeof parentElement === 'string') {\n            parentElement = document.querySelector(parentElement);\n        }\n        //console.log(parentElement, meta);\n        this._parentElement = parentElement;\n        this._theme = meta.theme;\n        this._onSend = onSend ? onSend : () => { }; // call back function for onSend\n        this._createWidget();\n        // title area\n        if (meta.titleArea) {\n            this.titleAreaSetContents(meta.titleArea.title, meta.titleArea.align);\n            if (meta.titleArea.show === true) {\n                this.titleAreaShow();\n            } else {\n                this.titleAreaHide();\n            }\n        }\n        // messages area\n        if (meta.messagesArea) {\n            this.messagesAreaAlternateColors(meta.messagesArea.alternating);\n        }\n\n        // input area\n        if (meta.inputArea) {\n            if (meta.inputArea.show === true)\n                this.inputAreaShow();\n            else\n                this.inputAreaHide();\n        }\n        // plumbing\n        this._attachEventListeners();\n        this.trackHistory = meta.trackHistory || true;\n        this._historyLimit = 10000000;\n        this._history = [];\n\n        // send on enter / shift enter\n        this.sendOnEnter = meta.sendOnEnter;\n        this.sendOnShiftEnter = meta.sendOnShiftEnter;\n    }\n\n    _createWidget() {\n        const widgetHTML =\n            `\n            <div class=\"quikchat-base ${this.theme}\">\n                <div class=\"quikchat-title-area\">\n                    <span style=\"font-size: 1.5em; font-weight: 600;\">Title Area</span>\n                </div>\n                <div class=\"quikchat-messages-area\"></div>\n                <div class=\"quikchat-input-area\">\n                    <textarea class=\"quikchat-input-textbox\"></textarea>\n                    <button class=\"quikchat-input-send-btn\">Send</button>\n                </div>\n            </div>\n            `;\n\n        this._parentElement.innerHTML = widgetHTML;\n        this._chatWidget = this._parentElement.querySelector('.quikchat-base');\n        this._titleArea = this._chatWidget.querySelector('.quikchat-title-area');\n        this._messagesArea = this._chatWidget.querySelector('.quikchat-messages-area');\n        this._inputArea = this._chatWidget.querySelector('.quikchat-input-area');\n        this._textEntry = this._inputArea.querySelector('.quikchat-input-textbox');\n        this._sendButton = this._inputArea.querySelector('.quikchat-input-send-btn');\n        this.msgid = 0;\n    }\n\n    /**\n     * Attach event listeners to the widget\n     */\n    _attachEventListeners() {\n        this._sendButton.addEventListener('click', (event) => { event.preventDefault(); this._onSend(this, this._textEntry.value.trim()) });\n        window.addEventListener('resize', () => this._handleContainerResize());\n        this._chatWidget.addEventListener('resize', () => this._handleContainerResize());\n        this._textEntry.addEventListener('keydown', (event) => {\n\n            // Check if Shift + Enter is pressed then we just do carraige\n            if (event.shiftKey && event.keyCode === 13) {\n                // Prevent default behavior (adding new line)\n                if (this.sendOnShiftEnter) {\n                    event.preventDefault();\n                    this._onSend(this, this._textEntry.value.trim());\n                }\n            } else if (event.keyCode === 13) {// Enter but not Shift + Enter\n                if (this.sendOnEnter) {\n                    event.preventDefault();\n                    this._onSend(this, this._textEntry.value.trim());\n                }\n            }\n        });\n\n        this._messagesArea.addEventListener('scroll', () => {\n            const { scrollTop, scrollHeight, clientHeight } = this._messagesArea;\n            this.userScrolledUp = scrollTop + clientHeight < scrollHeight;\n        });\n    }\n\n    // set the onSend function callback.\n    setCallbackOnSend(callback) {\n        this._onSend = callback;\n    }\n    // set a callback for everytime a message is added (listener)\n    setCallbackonMessageAdded(callback) {\n        this._onMessageAdded = callback;\n    }\n\n    // Public methods\n    titleAreaToggle() {\n        this._titleArea.style.display === 'none' ? this.titleAreaShow() : this.titleAreaHide();\n    }\n\n    titleAreaShow() {\n        this._titleArea.style.display = '';\n        this._adjustMessagesAreaHeight();\n    }\n\n    titleAreaHide() {\n        this._titleArea.style.display = 'none';\n        this._adjustMessagesAreaHeight();\n    }\n\n    titleAreaSetContents(title, align = 'center') {\n        this._titleArea.innerHTML = title;\n        this._titleArea.style.textAlign = align;\n    }\n\n    titleAreaGetContents() {\n        return this._titleArea.innerHTML;\n    }\n\n    inputAreaToggle() {\n        this._inputArea.classList.toggle('hidden');\n        this._inputArea.style.display === 'none' ? this.inputAreaShow() : this.inputAreaHide();\n    }\n\n    inputAreaShow() {\n        this._inputArea.style.display = '';\n        this._adjustMessagesAreaHeight();\n    }\n\n    inputAreaHide() {\n        this._inputArea.style.display = 'none';\n        this._adjustMessagesAreaHeight();\n    }\n\n    _adjustMessagesAreaHeight() {\n        const hiddenElements = [...this._chatWidget.children].filter(child => child.classList.contains('hidden'));\n        const totalHiddenHeight = hiddenElements.reduce((sum, child) => sum + child.offsetHeight, 0);\n        const containerHeight = this._chatWidget.offsetHeight;\n        this._messagesArea.style.height = `calc(100% - ${containerHeight - totalHiddenHeight}px)`;\n    }\n\n    _handleContainerResize() {\n        this._adjustMessagesAreaHeight();\n        this._adjustSendButtonWidth();\n        return true;\n    }\n\n    _adjustSendButtonWidth() {\n        const sendButtonText = this._sendButton.textContent.trim();\n        const fontSize = parseFloat(getComputedStyle(this._sendButton).fontSize);\n        const minWidth = fontSize * sendButtonText.length + 16;\n        this._sendButton.style.minWidth = `${minWidth}px`;\n        return true;\n    }\n\n    //messagesArea functions\n    messagesAreaAlternateColors(alt = true) {\n        if (alt) {\n            this._messagesArea.classList.add('quikchat-messages-area-alt');\n        }\n        else {\n            this._messagesArea.classList.remove('quikchat-messages-area-alt');\n        }\n        return alt === true;\n    }\n    messagesAreaAlternateColorsToggle() {\n        this._messagesArea.classList.toggle('quikchat-messages-area-alt');\n    }\n    messagesAreaAlternateColorsGet() {\n        return this._messagesArea.classList.contains('quikchat-messages-area-alt');\n    }\n    // message functions\n    messageAddFull(input = { content: \"\", userString: \"user\", align: \"right\", role: \"user\", userID: -1, timestamp: false, updatedtime: false, scrollIntoView: true }) {\n        const msgid = this.msgid;\n        const messageDiv = document.createElement('div');\n        const msgidClass = 'quikchat-msgid-' + String(msgid).padStart(10, '0');\n        const userIdClass = 'quikchat-userid-' + String(input.userString).padStart(10, '0'); // hash this..\n        messageDiv.classList.add('quikchat-message', msgidClass, 'quikchat-structure');\n        this.msgid++;\n        messageDiv.classList.add(this._messagesArea.children.length % 2 === 1 ? 'quikchat-message-1' : 'quikchat-message-2');\n    \n        const userDiv = document.createElement('div');\n        userDiv.innerHTML = input.userString;\n        userDiv.classList.add('quikchat-user-label');\n        userDiv.style.textAlign = input.align;\n    \n        const contentDiv = document.createElement('div');\n        contentDiv.classList.add('quikchat-message-content');\n    \n        // Determine text alignment for right-aligned messages\n        if (input.align === \"right\") {\n            const isMultiLine = input.content.includes(\"\\n\");\n            const isLong = input.content.length > 50; // Adjust length threshold\n    \n            if (isMultiLine || isLong) {\n                contentDiv.classList.add(\"quikchat-right-multiline\");\n            } else {\n                contentDiv.classList.add(\"quikchat-right-singleline\");\n            }\n        }\n    \n        contentDiv.innerHTML = input.content;\n    \n        messageDiv.appendChild(userDiv);\n        messageDiv.appendChild(contentDiv);\n        this._messagesArea.appendChild(messageDiv);\n    \n        // Scroll to the last message only if the user is not actively scrolling up\n        if ((!this.userScrolledUp) || input.scrollIntoView) {\n            this.messageScrollToBottom();\n        }\n    \n        this._textEntry.value = '';\n        this._adjustMessagesAreaHeight();\n        this._handleShortLongMessageCSS(messageDiv, input.align); // Handle CSS for short/long messages\n    \n        // Add timestamp now, unless it is passed in \n        const timestamp = input.timestamp ? input.timestamp : new Date().toISOString();\n        const updatedtime = input.updatedtime ? input.updatedtime : timestamp;\n    \n        if (this.trackHistory) {\n            this._history.push({ msgid, ...input, timestamp, updatedtime, messageDiv });\n            if (this._history.length > this._historyLimit) {\n                this._history.shift();\n            }\n        }\n    \n        if (this._onMessageAdded) {\n            this._onMessageAdded(this, msgid);\n        }\n    \n        return msgid;\n    }\n    \n\n\n    messageAddNew(content = \"\", userString = \"user\", align = \"right\", role = \"user\", scrollIntoView = true) {\n        let retvalue = this.messageAddFull(\n            { content: content, userString: userString, align: align, role: role, scrollIntoView: scrollIntoView }\n        );\n        // this.messageScrollToBottom();\n        return retvalue;\n\n    }\n    messageRemove(n) {\n        // use css selector to remove the message\n        let sucess = false;\n        try {\n            this._messagesArea.removeChild(this._messagesArea.querySelector(`.quikchat-msgid-${String(n).padStart(10, '0')}`));\n            sucess = true;\n        }\n        catch (error) {\n            console.log(`{String(n)} : Message ID not found`);\n        }\n        if (sucess) {\n            // slow way to remove from history\n            //this._history = this._history.filter((item) => item.msgid !== n); // todo make this more efficient\n\n            // better way to delete this from history\n            this._history.splice(this._history.findIndex((item) => item.msgid === n), 1);\n        }\n        return sucess;\n    }\n    /* returns the message html object from the DOM\n    */\n    messageGetDOMObject(n) {\n        let msg = null;\n        // now use css selector to get the message \n        try {\n            msg = this._messagesArea.querySelector(`.quikchat-msgid-${String(n).padStart(10, '0')}`);\n        }\n        catch (error) {\n            console.log(`{String(n)} : Message ID not found`);\n        }\n        return msg;\n    }\n    /* returns the message content only\n    */\n    messageGetContent(n) {\n        let content = \"\"\n        // now use css selector to get the message \n        try {\n            // get from history..\n            content = this._history.filter((item) => item.msgid === n)[0].content;\n            //content =  this._messagesArea.querySelector(`.quikchat-msgid-${String(n).padStart(10, '0')}`).lastChild.textContent;\n        }\n        catch (error) {\n            console.log(`{String(n)} : Message ID not found`);\n        }\n        return content;\n    }\n\n    /* returns the DOM Content element of a given message\n    */\n    messageGetContentDOMElement(n) {\n        let contentElement = null;\n        // now use css selector to get the message\n        try {\n            //contentElement = this._messagesArea.querySelector(`.quikchat-msgid-${String(n).padStart(10, '0')}`).lastChild;\n            contentElement = this._history.filter((item) => item.msgid === n)[0].messageDiv.lastChild;\n        }\n        catch (error) {\n            console.log(`{String(n)} : Message ID not found`);\n        }\n        return contentElement;\n    }\n\n    /* append message to the message content\n    */\n\n    messageAppendContent(n, content) {\n        let success = false;\n        try {\n            this._messagesArea.querySelector(`.quikchat-msgid-${String(n).padStart(10, '0')}`).lastChild.innerHTML += content;\n            // update history\n            let item = this._history.filter((item) => item.msgid === n)[0];\n            item.content += content;\n            item.updatedtime = new Date().toISOString();\n            success = true;\n\n            // Scroll to the last message only if the user is not actively scrolling up\n            if (!this.userScrolledUp) {\n                this._messagesArea.lastElementChild.scrollIntoView();\n            }\n        } catch (error) {\n            console.log(`${String(n)} : Message ID not found`);\n        }\n        return success;\n    }\n\n    /* replace message content\n    */\n    messageReplaceContent(n, content) {\n        let success = false;\n        try {\n            this._messagesArea.querySelector(`.quikchat-msgid-${String(n).padStart(10, '0')}`).lastChild.innerHTML = content;\n            // update history\n            let item = this._history.filter((item) => item.msgid === n)[0];\n            item.content = content;\n            item.updatedtime = new Date().toISOString();\n            success = true;\n\n            // Scroll to the last message only if the user is not actively scrolling up\n            if (!this.userScrolledUp) {\n                this._messagesArea.lastElementChild.scrollIntoView();\n            }\n        } catch (error) {\n            console.log(`${String(n)} : Message ID not found`);\n        }\n        return success;\n    }\n\n    /**\n     * Scrolls the messages area to the bottom.\n     */\n    messageScrollToBottom() {\n        this._messagesArea.lastElementChild.scrollIntoView();\n    }\n\n    /**\n     * For right sided or centered messages, we need to handle the CSS for short and long messages.\n     * for short messages we use simple justifying, for long messages we need to wrap and perform multiline\n     * formatting. \n     * \n     * @param {*} messageElement \n     * @returns nothing\n     */\n    _handleShortLongMessageCSS(messageElement, align) {\n        // console.log(messageElement);\n        // Reset classes\n        messageElement.classList.remove(\n            'left-singleline', 'left-multiline',\n            'center-singleline', 'center-multiline',\n            'right-singleline', 'right-multiline');\n        let contentDiv = messageElement.lastChild;\n        window.lastDiv = contentDiv; // for debugging   \n        // Determine if the message is short or long\n\n        const computedStyle = window.getComputedStyle(contentDiv);\n\n        // Get the element's height\n        const elementHeight = contentDiv.offsetHeight;\n\n        // Calculate or estimate line height\n        let lineHeight;\n        if (computedStyle.lineHeight === \"normal\") {\n            const fontSize = parseFloat(computedStyle.fontSize);\n            lineHeight = fontSize * 1.2; // approximate \"normal\" as 1.2 times font-size\n        } else {\n            lineHeight = parseFloat(computedStyle.lineHeight);\n        }\n\n        // Check if the element height is more than one line-height\n        const isMultiLine = elementHeight > lineHeight;\n\n        // Using scrollHeight and clientHeight to check for overflow (multi-line)\n        switch (align) {\n            case 'center':\n                if (isMultiLine) {\n                    messageElement.classList.add('center-multiline');\n                }\n                else {\n                    messageElement.classList.add('center-singleline');\n                }\n                break;\n            case 'right':\n                if (isMultiLine) {\n                    messageElement.classList.add('right-multiline');\n                }\n                else {\n                    messageElement.classList.add('right-singleline');\n                }\n                break;\n            case 'left':\n            default:\n                if (isMultiLine) {\n                    messageElement.classList.add('left-multiline');\n                }\n                else {\n                    messageElement.classList.add('left-singleline');\n                }\n                break;\n        }\n\n    }\n    // history functions\n    /**\n     * \n     * @param {*} n \n     * @param {*} m \n     * @returns array of history messages\n     */\n    historyGet(n, m) {\n\n        if (n == undefined) {\n            n = 0;\n            m = this._history.length;\n        }\n        if (m === undefined) {\n            m = n < 0 ? m : n + 1;\n        }\n        // remember that entries could be deleted.  TODO: So we need to return the actual history entries\n        // so now we need to find the array index that correspondes to messageIds n (start) and m (end)\n\n        return this._history.slice(n, m);\n    }\n\n    historyGetAllCopy() {\n        return this._history.slice();\n    }\n\n    historyClear() {\n        this.msgid = 0;\n        this._messagesArea.innerHTML = \"\";\n        this._history = [];\n    }\n\n    historyGetLength() {\n        return this._history.length;\n    }\n\n    historyGetMessage(n) {\n        if (n >= 0 && n < this._history.length) {\n            return this._history[n];\n        }\n        return {};\n\n    }\n\n    historyGetMessageContent(n) {\n        if (n >= 0 && n < this._history.length)\n            return this._history[n].content;\n        else\n            return \"\";\n    }\n\n    // expects an array of messages to be in the format of the history object\n    historyRestoreAll(messageList) {\n        // clear all messages and history\n        this.historyClear();\n\n        // clear the messages div \n        this._messagesArea.innerHTML = \"\";\n\n        // add all messages\n        messageList.forEach((message) => {\n            this.messageAddFull(message);\n        });\n    }\n    /**\n     * \n     * @param {string} newTheme \n     */\n    changeTheme(newTheme) {\n        this._chatWidget.classList.remove(this._theme);\n        this._chatWidget.classList.add(newTheme);\n        this._theme = newTheme;\n    }\n\n    /**\n     *  Get the current theme\n     * @returns {string} - The current theme\n     */\n    get theme() {\n        return this._theme;\n    }\n\n    /**\n     * \n     * @returns {object} - Returns the version and license information for the library.\n     */\n    static version() {\n        return { \"version\": \"1.1.12\", \"license\": \"BSD-2\", \"url\": \"https://github/deftio/quikchat\", \"fun\": true };\n    }\n\n    /**\n     * quikchat.loremIpsum() - Generate a simple string of Lorem Ipsum text (sample typographer's text) of numChars in length.\n     * borrowed from github.com/deftio/bitwrench.js\n     * @param {number} numChars - The number of characters to generate (random btw 25 and 150 if undefined).    \n     * @param {number} [startSpot=0] - The starting index in the Lorem Ipsum text. If undefined, a random startSpot will be generated.\n     * @param {boolean} [startWithCapitalLetter=true] - If true, capitalize the first character or inject a capital letter if the first character isn't a capital letter.\n     * \n     * @returns {string} A string of Lorem Ipsum text.\n     * \n     * @example \n     * // Returns 200 characters of Lorem Ipsum starting from index 50\n     * loremIpsum(200, 50);\n     * \n     * @example \n     * //Returns a 200 Lorem Ipsum characters starting from a random index\n     * loremIpsum(200);\n     */\n\n    static loremIpsum(numChars, startSpot = undefined, startWithCapitalLetter = true) {\n        const loremText = \"Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum. \";\n\n        if (typeof numChars !== \"number\") {\n            numChars = Math.floor(Math.random() * (150)) + 25;\n        }\n\n        if (startSpot === undefined) {\n            startSpot = Math.floor(Math.random() * loremText.length);\n        }\n\n        startSpot = startSpot % loremText.length;\n\n        // Move startSpot to the next non-whitespace and non-punctuation character\n        while (loremText[startSpot] === ' ' || /[.,:;!?]/.test(loremText[startSpot])) {\n            startSpot = (startSpot + 1) % loremText.length;\n        }\n\n        let l = loremText.substring(startSpot) + loremText.substring(0, startSpot);\n\n        if (typeof numChars !== \"number\") {\n            numChars = l.length;\n        }\n\n        let s = \"\";\n        while (numChars > 0) {\n            s += numChars < l.length ? l.substring(0, numChars) : l;\n            numChars -= l.length;\n        }\n\n        if (s[s.length - 1] === \" \") {\n            s = s.substring(0, s.length - 1) + \".\"; // always end on non-whitespace. \".\" was chosen arbitrarily.\n        }\n\n        if (startWithCapitalLetter) {\n            let c = s[0].toUpperCase();\n            c = /[A-Z]/.test(c) ? c : \"M\";\n            s = c + s.substring(1);\n        }\n\n        return s;\n    };\n\n    static tempMessageGenerator (domElement, content, interval, cb = null) {\n        interval = Math.max(interval, 100); // Ensure at least 100ms interval\n    \n        let count = 0;\n\n        let defaultCB = (msg, count) => {msg += \".\"; return msg; };\n\n        if (cb && typeof cb !== 'function') {\n            cb = null;\n        }\n\n        cb = cb || defaultCB;\n        \n        // if its a string, then get the element (css sel) or its an DOM element already \n        let el  = domElement;\n        if (typeof el === 'string') {\n            el = document.querySelector(el);\n        } \n\n        const element = el;\n\n    \n        // Ensure the element exists\n        if (!element) return;\n    \n        element.innerHTML = content;\n        let currentMsg = content;\n    \n        const intervalId = setInterval(() => {\n            if (element.innerHTML !== currentMsg) {\n                clearInterval(intervalId); // Stop updating if content is changed externally\n                return;\n            }\n            \n            currentMsg = String( cb(currentMsg, count)) ;// Use callback return value if provided\n            \n            count++;\n            element.innerHTML = currentMsg;\n        }, interval);\n    }\n\n}\n\nexport default quikchat;\n"],"names":["quikchat","parentElement","onSend","arguments","length","undefined","options","_classCallCheck","defaultOpts","theme","trackHistory","titleArea","title","show","align","messagesArea","alternating","inputArea","sendOnEnter","sendOnShiftEnter","meta","_objectSpread","document","querySelector","_parentElement","_theme","_onSend","_createWidget","titleAreaSetContents","titleAreaShow","titleAreaHide","messagesAreaAlternateColors","inputAreaShow","inputAreaHide","_attachEventListeners","_historyLimit","_history","_createClass","key","value","widgetHTML","concat","innerHTML","_chatWidget","_titleArea","_messagesArea","_inputArea","_textEntry","_sendButton","msgid","_this","addEventListener","event","preventDefault","trim","window","_handleContainerResize","shiftKey","keyCode","_this$_messagesArea","scrollTop","scrollHeight","clientHeight","userScrolledUp","setCallbackOnSend","callback","setCallbackonMessageAdded","_onMessageAdded","titleAreaToggle","style","display","_adjustMessagesAreaHeight","textAlign","titleAreaGetContents","inputAreaToggle","classList","toggle","hiddenElements","_toConsumableArray","children","filter","child","contains","totalHiddenHeight","reduce","sum","offsetHeight","containerHeight","height","_adjustSendButtonWidth","sendButtonText","textContent","fontSize","parseFloat","getComputedStyle","minWidth","alt","add","remove","messagesAreaAlternateColorsToggle","messagesAreaAlternateColorsGet","messageAddFull","input","content","userString","role","userID","timestamp","updatedtime","scrollIntoView","messageDiv","createElement","msgidClass","String","padStart","userDiv","contentDiv","isMultiLine","includes","isLong","appendChild","messageScrollToBottom","_handleShortLongMessageCSS","Date","toISOString","push","shift","messageAddNew","retvalue","messageRemove","n","sucess","removeChild","error","console","log","splice","findIndex","item","messageGetDOMObject","msg","messageGetContent","messageGetContentDOMElement","contentElement","lastChild","messageAppendContent","success","lastElementChild","messageReplaceContent","messageElement","lastDiv","computedStyle","elementHeight","lineHeight","historyGet","m","slice","historyGetAllCopy","historyClear","historyGetLength","historyGetMessage","historyGetMessageContent","historyRestoreAll","messageList","_this2","forEach","message","changeTheme","newTheme","get","version","loremIpsum","numChars","startSpot","startWithCapitalLetter","loremText","Math","floor","random","test","l","substring","s","c","toUpperCase","tempMessageGenerator","domElement","interval","cb","max","count","defaultCB","el","element","currentMsg","intervalId","setInterval","clearInterval"],"mappings":"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"}