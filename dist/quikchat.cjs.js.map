{"version":3,"file":"quikchat.cjs.js","sources":["../src/quikchat.js"],"sourcesContent":["\nclass quikchat {\n    /**\n     * \n     * @param string or DOM element  parentElement \n     * @param {*} meta \n     */\n    constructor(parentElement, onSend = () => { }, options = {}) {\n        const defaultOpts = {\n            theme: 'quikchat-theme-light',\n            trackHistory: true,\n            titleArea: { title: \"Chat\", show: false, align: \"center\" },\n            messagesArea: { alternating: true },\n            inputArea: { show: true }\n        }; \n        const meta = { ...defaultOpts, ...options }; // merge options with defaults\n\n        if (typeof parentElement === 'string') {\n            parentElement = document.querySelector(parentElement);\n        }\n        //console.log(parentElement, meta);\n        this._parentElement = parentElement;\n        this._theme = meta.theme;\n        this._onSend = onSend ? onSend : () => { }; // call back function for onSend\n        this._createWidget();\n        // title area\n        if (meta.titleArea) {\n            this.titleAreaSetContents(meta.titleArea.title, meta.titleArea.align);\n            if (meta.titleArea.show === true) {\n                this.titleAreaShow();\n            } else {\n                this.titleAreaHide();\n            }\n        }\n        // messages area\n        if (meta.messagesArea) {\n            this.messagesAreaAlternateColors(meta.messagesArea.alternating);\n        }\n\n        // input area\n        if (meta.inputArea) {\n            if (meta.inputArea.show === true) \n                this.inputAreaShow();\n            else \n                this.inputAreaHide();\n        }\n        // plumbing\n        this._attachEventListeners();\n        this.trackHistory = meta.trackHistory || true;\n        this._historyLimit = 10000000;\n        this._history = [];\n    }\n\n    _createWidget() {\n        const widgetHTML =\n            `\n            <div class=\"quikchat-base ${this.theme}\">\n                <div class=\"quikchat-title-area\">\n                    <span style=\"font-size: 1.5em; font-weight: 600;\">Title Area</span>\n                </div>\n                <div class=\"quikchat-messages-area\"></div>\n                <div class=\"quikchat-input-area\">\n                    <textarea class=\"quikchat-input-textbox\"></textarea>\n                    <button class=\"quikchat-input-send-btn\">Send</button>\n                </div>\n            </div>\n            `;\n\n        this._parentElement.innerHTML = widgetHTML;\n        this._chatWidget = this._parentElement.querySelector('.quikchat-base');\n        this._titleArea = this._chatWidget.querySelector('.quikchat-title-area');\n        this._messagesArea = this._chatWidget.querySelector('.quikchat-messages-area');\n        this._inputArea = this._chatWidget.querySelector('.quikchat-input-area');\n        this._textEntry = this._inputArea.querySelector('.quikchat-input-textbox');\n        this._sendButton = this._inputArea.querySelector('.quikchat-input-send-btn');\n        this.msgid = 0;\n    }\n\n    /**\n     * Attach event listeners to the widget\n     */\n    _attachEventListeners() {\n        this._sendButton.addEventListener('click', () => this._onSend(this, this._textEntry.value.trim()));\n        window.addEventListener('resize', () => this._handleContainerResize());\n        this._chatWidget.addEventListener('resize', () => this._handleContainerResize());\n        this._textEntry.addEventListener('keydown', (event) => {\n            // Check if Shift + Enter is pressed\n            if (event.shiftKey && event.keyCode === 13) {\n                // Prevent default behavior (adding new line)\n                event.preventDefault();\n                this._onSend(this, this._textEntry.value.trim());\n            }\n        });\n\n        this._messagesArea.addEventListener('scroll', () => {\n            const { scrollTop, scrollHeight, clientHeight } = this._messagesArea;\n            this.userScrolledUp = scrollTop + clientHeight < scrollHeight;\n        });\n    }\n   \n    // set the onSend function callback.\n    setCallbackOnSend(callback) {\n        this._onSend = callback;\n    }\n    // set a callback for everytime a message is added (listener)\n    setCallbackonMessageAdded(callback) {\n        this._onMessageAdded = callback;\n    }\n\n    // Public methods\n    titleAreaToggle() {\n        this._titleArea.style.display === 'none' ? this.titleAreaShow() : this.titleAreaHide();\n    }\n\n    titleAreaShow() {\n        this._titleArea.style.display = '';\n        this._adjustMessagesAreaHeight();\n    }\n\n    titleAreaHide() {\n        this._titleArea.style.display = 'none';\n        this._adjustMessagesAreaHeight();\n    }\n\n    titleAreaSetContents(title, align = 'center') {\n        this._titleArea.innerHTML = title;\n        this._titleArea.style.textAlign = align;\n    }\n\n    titleAreaGetContents() {\n        return this._titleArea.innerHTML;\n    }\n\n    inputAreaToggle() {\n        this._inputArea.classList.toggle('hidden');\n        this._inputArea.style.display === 'none' ? this.inputAreaShow() : this.inputAreaHide();\n    }\n\n    inputAreaShow() {\n        this._inputArea.style.display = '';\n        this._adjustMessagesAreaHeight();\n    }\n\n    inputAreaHide() {\n        this._inputArea.style.display = 'none';\n        this._adjustMessagesAreaHeight();\n    }\n\n    _adjustMessagesAreaHeight() {\n        const hiddenElements = [...this._chatWidget.children].filter(child => child.classList.contains('hidden'));\n        const totalHiddenHeight = hiddenElements.reduce((sum, child) => sum + child.offsetHeight, 0);\n        const containerHeight = this._chatWidget.offsetHeight;\n        this._messagesArea.style.height = `calc(100% - ${containerHeight - totalHiddenHeight}px)`;\n    }\n\n    _handleContainerResize() {\n        this._adjustMessagesAreaHeight();\n        this._adjustSendButtonWidth();\n        return true;\n    }\n\n    _adjustSendButtonWidth() {\n        const sendButtonText = this._sendButton.textContent.trim();\n        const fontSize = parseFloat(getComputedStyle(this._sendButton).fontSize);\n        const minWidth = fontSize * sendButtonText.length + 16;\n        this._sendButton.style.minWidth = `${minWidth}px`;\n        return true;\n    }\n\n    //messagesArea functions\n    messagesAreaAlternateColors(alt = true) {\n        if (alt) {\n            this._messagesArea.classList.add('quikchat-messages-area-alt');\n        }\n        else {\n            this._messagesArea.classList.remove('quikchat-messages-area-alt');\n        }\n        return alt === true;\n    }\n    messagesAreaAlternateColorsToggle() {\n        this._messagesArea.classList.toggle('quikchat-messages-area-alt');\n    }\n    messagesAreaAlternateColorsGet() {\n        return this._messagesArea.classList.contains('quikchat-messages-area-alt');\n    }\n    // message functions\n    messageAddFull(input = { content: \"\", userString: \"user\", align: \"right\", role: \"user\", userID: -1 }) {\n        const msgid = this.msgid;\n        const messageDiv = document.createElement('div');\n        const msgidClass = 'quikchat-msgid-' + String(msgid).padStart(10, '0');\n        const userIdClass = 'quikchat-userid-' + String(input.userString).padStart(10, '0'); // hash this..\n        messageDiv.classList.add('quikchat-message', msgidClass);\n        this.msgid++;\n        messageDiv.classList.add(this._messagesArea.children.length % 2 === 1 ? 'quikchat-message-1' : 'quikchat-message-2');\n\n        const userDiv = document.createElement('div');\n        userDiv.innerHTML = input.userString;\n        userDiv.style = `width: 100%; text-align: ${input.align}; font-size: 1em; font-weight:700;`;\n\n        const contentDiv = document.createElement('div');\n        contentDiv.style = `width: 100%; text-align: ${input.align};`;\n        contentDiv.innerHTML = input.content;\n\n        messageDiv.appendChild(userDiv);\n        messageDiv.appendChild(contentDiv);\n        this._messagesArea.appendChild(messageDiv);\n\n        // Scroll to the last message only if the user is not actively scrolling up\n        if (!this.userScrolledUp) {\n            this._messagesArea.lastElementChild.scrollIntoView();\n        }\n\n        this._textEntry.value = '';\n        this._adjustMessagesAreaHeight();\n        const timestamp = new Date().toISOString();\n        const updatedtime = timestamp;\n\n        if (this.trackHistory) {\n            this._history.push({ msgid, ...input, timestamp, updatedtime, messageDiv });\n            if (this._history.length > this._historyLimit) {\n                this._history.shift();\n            }\n        }\n\n        if (this._onMessageAdded) {\n            this._onMessageAdded(this, msgid);\n        }\n\n        return msgid;\n    }\n\n   \n    messageAddNew(content = \"\", userString = \"user\", align = \"right\", role = \"user\") {\n        return this.messageAddFull(\n            { content: content, userString: userString, align: align, role: role }\n        );\n    }\n    messageRemove(n) {\n        // use css selector to remove the message\n        let sucess = false;\n        try {\n            this._messagesArea.removeChild(this._messagesArea.querySelector(`.quikchat-msgid-${String(n).padStart(10, '0')}`));\n            sucess = true;\n        }\n        catch (error) {\n            console.log(`{String(n)} : Message ID not found`);\n        }\n        if (sucess) {\n            // slow way to remove from history\n            //this._history = this._history.filter((item) => item.msgid !== n); // todo make this more efficient\n\n            // better way to delete this from history\n            this._history.splice(this._history.findIndex((item) => item.msgid === n), 1);\n        }\n        return sucess;\n    }\n    /* returns the message html object from the DOM\n    */\n    messageGetDOMObject(n) {\n        let msg = null;\n        // now use css selector to get the message \n        try {\n            msg = this._messagesArea.querySelector(`.quikchat-msgid-${String(n).padStart(10, '0')}`);\n        }\n        catch (error) {\n            console.log(`{String(n)} : Message ID not found`);\n        }\n        return msg;\n    }\n    /* returns the message content only\n    */\n    messageGetContent(n) {\n        let content = \"\"\n        // now use css selector to get the message \n        try {\n            // get from history..\n            content = this._history.filter((item) => item.msgid === n)[0].content;\n            //content =  this._messagesArea.querySelector(`.quikchat-msgid-${String(n).padStart(10, '0')}`).lastChild.textContent;\n        }\n        catch (error) {\n            console.log(`{String(n)} : Message ID not found`);\n        }\n        return content;\n    }\n\n    /* append message to the message content\n    */\n\n    messageAppendContent(n, content) {\n        let success = false;\n        try {\n            this._messagesArea.querySelector(`.quikchat-msgid-${String(n).padStart(10, '0')}`).lastChild.innerHTML += content;\n            // update history\n            let item = this._history.filter((item) => item.msgid === n)[0];\n            item.content += content;\n            item.updatedtime = new Date().toISOString();\n            success = true;\n\n            // Scroll to the last message only if the user is not actively scrolling up\n            if (!this.userScrolledUp) {\n                this._messagesArea.lastElementChild.scrollIntoView();\n            }\n        } catch (error) {\n            console.log(`${String(n)} : Message ID not found`);\n        }\n        return success;\n    }\n    \n    /* replace message content\n    */\n    messageReplaceContent(n, content) {\n        let success = false;\n        try {\n            this._messagesArea.querySelector(`.quikchat-msgid-${String(n).padStart(10, '0')}`).lastChild.innerHTML = content;\n            // update history\n            let item = this._history.filter((item) => item.msgid === n)[0];\n            item.content = content;\n            item.updatedtime = new Date().toISOString();\n            success = true;\n\n            // Scroll to the last message only if the user is not actively scrolling up\n            if (!this.userScrolledUp) {\n                this._messagesArea.lastElementChild.scrollIntoView();\n            }\n        } catch (error) {\n            console.log(`${String(n)} : Message ID not found`);\n        }\n        return success;\n    }\n    \n    // history functions\n    /**\n     * \n     * @param {*} n \n     * @param {*} m \n     * @returns array of history messages\n     */\n    historyGet(n, m) {\n\n        if (n == undefined) {\n            n = 0;\n            m = this._history.length;\n        }\n        if (m === undefined) {\n            m = n < 0 ? m : n + 1;\n        }\n        // remember that entries could be deleted.  TODO: So we need to return the actual history entries\n        // so now we need to find the array index that correspondes to messageIds n (start) and m (end)\n\n        return this._history.slice(n, m);\n    }\n\n    historyClear() {\n        this.msgid = 0;\n        this._history = [];\n    }\n\n    historyGetLength() {\n        return this._history.length;\n    }\n\n    historyGetMessage(n) {\n        if (n >= 0 && n < this._history.length) {\n            return this._history[n];\n        }\n        return {};\n\n    }\n\n    historyGetMessageContent(n) {\n        if (n >= 0 && n < this._history.length) \n            return this._history[n].content;\n        else\n            return \"\";\n    }\n\n    /**\n     * \n     * @param {string} newTheme \n     */\n    changeTheme(newTheme) {\n        this._chatWidget.classList.remove(this._theme);\n        this._chatWidget.classList.add(newTheme);\n        this._theme = newTheme;\n    }\n\n    /**\n     *  Get the current theme\n     * @returns {string} - The current theme\n     */\n    get theme() {\n        return this._theme;\n    }\n\n    /**\n     * \n     * @returns {object} - Returns the version and license information for the library.\n     */\n    static version() {\n        return { \"version\": \"1.1.6\", \"license\": \"BSD-2\", \"url\": \"https://github/deftio/quikchat\" };\n    }\n\n    /**\n     * quikchat.loremIpsum() - Generate a simple string of Lorem Ipsum text (sample typographer's text) of numChars in length.\n     * borrowed from github.com/deftio/bitwrench.js\n     * @param {number} numChars - The number of characters to generate (random btw 25 and 150 if undefined).    \n     * @param {number} [startSpot=0] - The starting index in the Lorem Ipsum text. If undefined, a random startSpot will be generated.\n     * @param {boolean} [startWithCapitalLetter=true] - If true, capitalize the first character or inject a capital letter if the first character isn't a capital letter.\n     * \n     * @returns {string} A string of Lorem Ipsum text.\n     * \n     * @example \n     * // Returns 200 characters of Lorem Ipsum starting from index 50\n     * loremIpsum(200, 50);\n     * \n     * @example \n     * //Returns a 200 Lorem Ipsum characters starting from a random index\n     * loremIpsum(200);\n     */\n\n    static loremIpsum(numChars, startSpot = undefined, startWithCapitalLetter = true) {\n        const loremText = \"Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum. \";\n\n        if (typeof numChars !== \"number\") {\n            numChars = Math.floor(Math.random() * (150)) + 25;\n        }\n\n        if (startSpot === undefined) {\n            startSpot = Math.floor(Math.random() * loremText.length);\n        }\n\n        startSpot = startSpot % loremText.length;\n\n        // Move startSpot to the next non-whitespace and non-punctuation character\n        while (loremText[startSpot] === ' ' || /[.,:;!?]/.test(loremText[startSpot])) {\n            startSpot = (startSpot + 1) % loremText.length;\n        }\n\n        let l = loremText.substring(startSpot) + loremText.substring(0, startSpot);\n\n        if (typeof numChars !== \"number\") {\n            numChars = l.length;\n        }\n\n        let s = \"\";\n        while (numChars > 0) {\n            s += numChars < l.length ? l.substring(0, numChars) : l;\n            numChars -= l.length;\n        }\n\n        if (s[s.length - 1] === \" \") {\n            s = s.substring(0, s.length - 1) + \".\"; // always end on non-whitespace. \".\" was chosen arbitrarily.\n        }\n\n        if (startWithCapitalLetter) {\n            let c = s[0].toUpperCase();\n            c = /[A-Z]/.test(c) ? c : \"M\";\n            s = c + s.substring(1);\n        }\n\n        return s;\n    };\n\n\n}\n\nexport default quikchat;\n"],"names":["quikchat","parentElement","onSend","arguments","length","undefined","options","_classCallCheck","defaultOpts","theme","trackHistory","titleArea","title","show","align","messagesArea","alternating","inputArea","meta","_objectSpread","document","querySelector","_parentElement","_theme","_onSend","_createWidget","titleAreaSetContents","titleAreaShow","titleAreaHide","messagesAreaAlternateColors","inputAreaShow","inputAreaHide","_attachEventListeners","_historyLimit","_history","_createClass","key","value","widgetHTML","concat","innerHTML","_chatWidget","_titleArea","_messagesArea","_inputArea","_textEntry","_sendButton","msgid","_this","addEventListener","trim","window","_handleContainerResize","event","shiftKey","keyCode","preventDefault","_this$_messagesArea","scrollTop","scrollHeight","clientHeight","userScrolledUp","setCallbackOnSend","callback","setCallbackonMessageAdded","_onMessageAdded","titleAreaToggle","style","display","_adjustMessagesAreaHeight","textAlign","titleAreaGetContents","inputAreaToggle","classList","toggle","hiddenElements","_toConsumableArray","children","filter","child","contains","totalHiddenHeight","reduce","sum","offsetHeight","containerHeight","height","_adjustSendButtonWidth","sendButtonText","textContent","fontSize","parseFloat","getComputedStyle","minWidth","alt","add","remove","messagesAreaAlternateColorsToggle","messagesAreaAlternateColorsGet","messageAddFull","input","content","userString","role","userID","messageDiv","createElement","msgidClass","String","padStart","userDiv","contentDiv","appendChild","lastElementChild","scrollIntoView","timestamp","Date","toISOString","updatedtime","push","shift","messageAddNew","messageRemove","n","sucess","removeChild","error","console","log","splice","findIndex","item","messageGetDOMObject","msg","messageGetContent","messageAppendContent","success","lastChild","messageReplaceContent","historyGet","m","slice","historyClear","historyGetLength","historyGetMessage","historyGetMessageContent","changeTheme","newTheme","get","version","loremIpsum","numChars","startSpot","startWithCapitalLetter","loremText","Math","floor","random","test","l","substring","s","c","toUpperCase"],"mappings":"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"}