!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):(e="undefined"!=typeof globalThis?globalThis:e||self).quikchat=t()}(this,(function(){"use strict";function e(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,n=Array(t);i<t;i++)n[i]=e[i];return n}function t(e,t,i){return t&&function(e,t){for(var i=0;i<t.length;i++){var a=t[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,n(a.key),a)}}(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function i(t){return function(t){if(Array.isArray(t))return e(t)}(t)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(t)||function(t,i){if(t){if("string"==typeof t)return e(t,i);var n={}.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?e(t,i):void 0}}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function n(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var n=i.call(e,t);if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e,"string");return"symbol"==typeof t?t:t+""}var a=function(){return t((function e(t){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{theme:"quikchat-theme-light",onSend:function(){}};!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.parentElement=t,this.theme=i.theme,this.onSend=i.onSend?i.onSend:function(){},this.createWidget(),i.titleArea&&(this.titleAreaSet(i.titleArea.title,i.titleArea.align),i.titleArea.show?this.titleAreaShow():this.titleAreaHide()),this.attachEventListeners()}),[{key:"createWidget",value:function(){var e='\n            <div class="quikchat-base '.concat(this.theme,'">\n                <div class="quikchat-title-area">\n                    <span style="font-size: 1.5em; font-weight: 600;">Title Area</span>\n                </div>\n                <div class="quikchat-messages-area"></div>\n                <div class="quikchat-input-area">\n                    <textarea class="quikchat-input-textbox"></textarea>\n                    <button class="quikchat-input-send-btn">Send</button>\n                </div>\n            </div>\n            ');this.parentElement.innerHTML=e,this.chatWidget=this.parentElement.querySelector(".quikchat-base"),this.titleArea=this.chatWidget.querySelector(".quikchat-title-area"),this.messagesArea=this.chatWidget.querySelector(".quikchat-messages-area"),this.inputArea=this.chatWidget.querySelector(".quikchat-input-area"),this.textEntry=this.inputArea.querySelector(".quikchat-input-textbox"),this.sendButton=this.inputArea.querySelector(".quikchat-input-send-btn")}},{key:"attachEventListeners",value:function(){var e=this;this.sendButton.addEventListener("click",(function(){return e.onSend(e,e.textEntry.value.trim())})),window.addEventListener("resize",(function(){return e.handleContainerResize()})),this.chatWidget.addEventListener("resize",(function(){return e.handleContainerResize()}))}},{key:"titleAreaToggle",value:function(){"none"===this.titleArea.style.display?this.titleAreaShow():this.titleAreaHide()}},{key:"titleAreaShow",value:function(){this.titleArea.style.display="",this.adjustMessagesAreaHeight()}},{key:"titleAreaHide",value:function(){this.titleArea.style.display="none",this.adjustMessagesAreaHeight()}},{key:"titleAreaSet",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"center";this.titleArea.textContent=e,this.titleArea.style.textAlign=t}},{key:"titleAreaGet",value:function(){return this.titleArea.textContent}},{key:"inputAreaToggle",value:function(){this.inputArea.classList.toggle("hidden"),"none"===this.inputArea.style.display?this.inputAreaShow():this.inputAreaHide()}},{key:"inputAreaShow",value:function(){this.inputArea.style.display="",this.adjustMessagesAreaHeight()}},{key:"inputAreaHide",value:function(){this.inputArea.style.display="none",this.adjustMessagesAreaHeight()}},{key:"adjustMessagesAreaHeight",value:function(){var e=i(this.chatWidget.children).filter((function(e){return e.classList.contains("hidden")})).reduce((function(e,t){return e+t.offsetHeight}),0),t=this.chatWidget.offsetHeight;this.messagesArea.style.height="calc(100% - ".concat(t-e,"px)")}},{key:"handleContainerResize",value:function(){this.adjustMessagesAreaHeight(),this.adjustSendButtonWidth(),console.log("Container resized")}},{key:"adjustSendButtonWidth",value:function(){var e=this.sendButton.textContent.trim(),t=parseFloat(getComputedStyle(this.sendButton).fontSize)*e.length+16;this.sendButton.style.minWidth="".concat(t,"px")}},{key:"addMessage",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"foo",i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"left",n=document.createElement("div");n.classList.add("quikchat-message"),n.classList.add(this.messagesArea.children.length%2==1?"quikchat-message-1":"quikchat-message-2");var a=document.createElement("div");a.textContent=t,a.style="width: 100%; text-align: ".concat(i,"; font-size: 1em; font-weight:700; color: #444;");var s=document.createElement("div");s.style="width: 100%; text-align: ".concat(i,";"),s.textContent=e,n.appendChild(a),n.appendChild(s),this.messagesArea.appendChild(n),this.messagesArea.lastChild.scrollIntoView(),this.textEntry.value="",this.adjustMessagesAreaHeight()}},{key:"removeMesssage",value:function(e){this.messagesArea.removeChild(this.messagesArea.children[e])}},{key:"getMessage",value:function(e){return this.messagesArea.children[e].lastChild.textContent}},{key:"appendMessage",value:function(e,t){this.messagesArea.children[e].lastChild.textContent+=t}},{key:"updateMessage",value:function(e,t){this.messagesArea.children[e].lastChild.textContent=t}},{key:"changeTheme",value:function(e){this.chatWidget.classList.remove(this.theme),this.chatWidget.classList.add(e),this.theme=e}}])}();return a}));
//# sourceMappingURL=quikchat.umd.min.js.map
