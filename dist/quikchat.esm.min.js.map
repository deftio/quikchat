{"version":3,"file":"quikchat.esm.min.js","sources":["../src/quikchat.js"],"sourcesContent":["// quikchat.js\n\nclass quikchat {\n    constructor(parentElement, meta = { theme: 'quikchat-theme-light', onSend: () => { } }) {\n        this.parentElement = parentElement;\n        this.theme = meta.theme;\n        this.onSend = meta.onSend ? meta.onSend : () => { };\n        this.createWidget();\n        // title area\n        if (meta.titleArea) {\n            this.titleAreaSet(meta.titleArea.title, meta.titleArea.align);\n            if (meta.titleArea.show) {\n                this.titleAreaShow();\n            } else {\n                this.titleAreaHide();\n            }\n        }\n        this.attachEventListeners();\n    }\n\n    createWidget() {\n        const widgetHTML =\n            `\n            <div class=\"quikchat-base ${this.theme}\">\n                <div class=\"quikchat-title-area\">\n                    <span style=\"font-size: 1.5em; font-weight: 600;\">Title Area</span>\n                </div>\n                <div class=\"quikchat-messages-area\"></div>\n                <div class=\"quikchat-input-area\">\n                    <textarea class=\"quikchat-input-textbox\"></textarea>\n                    <button class=\"quikchat-input-send-btn\">Send</button>\n                </div>\n            </div>\n            `;\n\n        this.parentElement.innerHTML = widgetHTML;\n        this.chatWidget = this.parentElement.querySelector('.quikchat-base');\n        this.titleArea = this.chatWidget.querySelector('.quikchat-title-area');\n        this.messagesArea = this.chatWidget.querySelector('.quikchat-messages-area');\n        this.inputArea = this.chatWidget.querySelector('.quikchat-input-area');\n        this.textEntry = this.inputArea.querySelector('.quikchat-input-textbox');\n        this.sendButton = this.inputArea.querySelector('.quikchat-input-send-btn');\n    }\n\n    attachEventListeners() {\n        this.sendButton.addEventListener('click', () => this.onSend(this, this.textEntry.value.trim()));\n        window.addEventListener('resize', () => this.handleContainerResize());\n        this.chatWidget.addEventListener('resize', () => this.handleContainerResize());\n        this.textEntry.addEventListener('keydown', (event) => {\n            // Check if Shift + Enter is pressed\n            if (event.shiftKey && event.keyCode === 13) {\n                // Prevent default behavior (adding new line)\n                event.preventDefault();\n                this.onSend(this, this.textEntry.value.trim())\n            }\n        });\n    }\n\n    titleAreaToggle() {\n        this.titleArea.style.display === 'none' ? this.titleAreaShow() : this.titleAreaHide();\n    }\n\n    titleAreaShow() {\n        this.titleArea.style.display = '';\n        this.adjustMessagesAreaHeight();\n    }\n\n    titleAreaHide() {\n        this.titleArea.style.display = 'none';\n        this.adjustMessagesAreaHeight();\n    }\n\n    titleAreaSet(title, align = 'center') {\n        this.titleArea.textContent = title;\n        this.titleArea.style.textAlign = align;\n    }\n\n    titleAreaGet() {\n        return this.titleArea.textContent;\n    }\n\n    inputAreaToggle() {\n        this.inputArea.classList.toggle('hidden');\n        this.inputArea.style.display === 'none' ? this.inputAreaShow() : this.inputAreaHide();\n    }\n\n    inputAreaShow() {\n        this.inputArea.style.display = '';\n        this.adjustMessagesAreaHeight();\n    }\n\n    inputAreaHide() {\n        this.inputArea.style.display = 'none';\n        this.adjustMessagesAreaHeight();\n    }\n\n    adjustMessagesAreaHeight() {\n        const hiddenElements = [...this.chatWidget.children].filter(child => child.classList.contains('hidden'));\n        const totalHiddenHeight = hiddenElements.reduce((sum, child) => sum + child.offsetHeight, 0);\n        const containerHeight = this.chatWidget.offsetHeight;\n        this.messagesArea.style.height = `calc(100% - ${containerHeight - totalHiddenHeight}px)`;\n    }\n\n    handleContainerResize() {\n        this.adjustMessagesAreaHeight();\n        this.adjustSendButtonWidth();\n        console.log('Container resized');\n    }\n\n    adjustSendButtonWidth() {\n        const sendButtonText = this.sendButton.textContent.trim();\n        const fontSize = parseFloat(getComputedStyle(this.sendButton).fontSize);\n        const minWidth = fontSize * sendButtonText.length + 16;\n        this.sendButton.style.minWidth = `${minWidth}px`;\n    }\n\n    addMessage(message, user = \"foo\", align = 'left') {\n        const messageDiv = document.createElement('div');\n        messageDiv.classList.add('quikchat-message');\n        messageDiv.classList.add(this.messagesArea.children.length % 2 === 1 ? 'quikchat-message-1' : 'quikchat-message-2');\n\n        const userDiv = document.createElement('div');\n        userDiv.textContent = user;\n        userDiv.style = `width: 100%; text-align: ${align}; font-size: 1em; font-weight:700; color: #444;`;\n\n        const contentDiv = document.createElement('div');\n        contentDiv.style = `width: 100%; text-align: ${align};`;\n        contentDiv.textContent = message;\n\n        messageDiv.appendChild(userDiv);\n        messageDiv.appendChild(contentDiv);\n        this.messagesArea.appendChild(messageDiv);\n        this.messagesArea.lastChild.scrollIntoView();\n\n        this.textEntry.value = '';\n        this.adjustMessagesAreaHeight();\n    }\n\n    removeMesssage(n) {\n        this.messagesArea.removeChild(this.messagesArea.children[n]);\n    }\n\n    getMessage(n) {\n        return this.messagesArea.children[n].lastChild.textContent;\n    }\n\n    appendMessage(n, message) {\n        this.messagesArea.children[n].lastChild.textContent += message;\n    }\n\n    updateMessage(n, message) {\n        this.messagesArea.children[n].lastChild.textContent = message;\n    }\n\n    changeTheme(newTheme) {\n        this.chatWidget.classList.remove(this.theme);\n        this.chatWidget.classList.add(newTheme);\n        this.theme = newTheme;\n    }\n}\n\nexport default quikchat;\n"],"names":["quikchat","_createClass","parentElement","meta","arguments","length","undefined","theme","onSend","_classCallCheck","this","createWidget","titleArea","titleAreaSet","title","align","show","titleAreaShow","titleAreaHide","attachEventListeners","key","value","widgetHTML","concat","innerHTML","chatWidget","querySelector","messagesArea","inputArea","textEntry","sendButton","_this","addEventListener","trim","window","handleContainerResize","event","shiftKey","keyCode","preventDefault","style","display","adjustMessagesAreaHeight","textContent","textAlign","classList","toggle","inputAreaShow","inputAreaHide","totalHiddenHeight","_toConsumableArray","children","filter","child","contains","reduce","sum","offsetHeight","containerHeight","height","adjustSendButtonWidth","console","log","sendButtonText","minWidth","parseFloat","getComputedStyle","fontSize","message","user","messageDiv","document","createElement","add","userDiv","contentDiv","appendChild","lastChild","scrollIntoView","n","removeChild","newTheme","remove"],"mappings":"ywCAAA,IAEMA,EAAQ,WAgBT,OAAAC,GAfD,SAAAD,EAAYE,GAA4E,IAA7DC,EAAIC,UAAAC,OAAAD,QAAAE,IAAAF,UAAAE,GAAAF,UAAG,GAAA,CAAEG,MAAO,uBAAwBC,OAAQ,WAAQ,gGAAGC,MAAAT,GAClFU,KAAKR,cAAgBA,EACrBQ,KAAKH,MAAQJ,EAAKI,MAClBG,KAAKF,OAASL,EAAKK,OAASL,EAAKK,OAAS,aAC1CE,KAAKC,eAEDR,EAAKS,YACLF,KAAKG,aAAaV,EAAKS,UAAUE,MAAOX,EAAKS,UAAUG,OACnDZ,EAAKS,UAAUI,KACfN,KAAKO,gBAELP,KAAKQ,iBAGbR,KAAKS,sBACT,GAAC,CAAA,CAAAC,IAAA,eAAAC,MAED,WACI,IAAMC,EAAUC,2CAAAA,OAEgBb,KAAKH,MAUhC,weAELG,KAAKR,cAAcsB,UAAYF,EAC/BZ,KAAKe,WAAaf,KAAKR,cAAcwB,cAAc,kBACnDhB,KAAKE,UAAYF,KAAKe,WAAWC,cAAc,wBAC/ChB,KAAKiB,aAAejB,KAAKe,WAAWC,cAAc,2BAClDhB,KAAKkB,UAAYlB,KAAKe,WAAWC,cAAc,wBAC/ChB,KAAKmB,UAAYnB,KAAKkB,UAAUF,cAAc,2BAC9ChB,KAAKoB,WAAapB,KAAKkB,UAAUF,cAAc,2BACnD,GAAC,CAAAN,IAAA,uBAAAC,MAED,WAAuB,IAAAU,EAAArB,KACnBA,KAAKoB,WAAWE,iBAAiB,SAAS,WAAA,OAAMD,EAAKvB,OAAOuB,EAAMA,EAAKF,UAAUR,MAAMY,WACvFC,OAAOF,iBAAiB,UAAU,WAAA,OAAMD,EAAKI,2BAC7CzB,KAAKe,WAAWO,iBAAiB,UAAU,WAAA,OAAMD,EAAKI,2BACtDzB,KAAKmB,UAAUG,iBAAiB,WAAW,SAACI,GAEpCA,EAAMC,UAA8B,KAAlBD,EAAME,UAExBF,EAAMG,iBACNR,EAAKvB,OAAOuB,EAAMA,EAAKF,UAAUR,MAAMY,QAE/C,GACJ,GAAC,CAAAb,IAAA,kBAAAC,MAED,WACqC,SAAjCX,KAAKE,UAAU4B,MAAMC,QAAqB/B,KAAKO,gBAAkBP,KAAKQ,eAC1E,GAAC,CAAAE,IAAA,gBAAAC,MAED,WACIX,KAAKE,UAAU4B,MAAMC,QAAU,GAC/B/B,KAAKgC,0BACT,GAAC,CAAAtB,IAAA,gBAAAC,MAED,WACIX,KAAKE,UAAU4B,MAAMC,QAAU,OAC/B/B,KAAKgC,0BACT,GAAC,CAAAtB,IAAA,eAAAC,MAED,SAAaP,GAAyB,IAAlBC,EAAKX,UAAAC,OAAA,QAAAC,IAAAF,UAAA,GAAAA,UAAA,GAAG,SACxBM,KAAKE,UAAU+B,YAAc7B,EAC7BJ,KAAKE,UAAU4B,MAAMI,UAAY7B,CACrC,GAAC,CAAAK,IAAA,eAAAC,MAED,WACI,OAAOX,KAAKE,UAAU+B,WAC1B,GAAC,CAAAvB,IAAA,kBAAAC,MAED,WACIX,KAAKkB,UAAUiB,UAAUC,OAAO,UACC,SAAjCpC,KAAKkB,UAAUY,MAAMC,QAAqB/B,KAAKqC,gBAAkBrC,KAAKsC,eAC1E,GAAC,CAAA5B,IAAA,gBAAAC,MAED,WACIX,KAAKkB,UAAUY,MAAMC,QAAU,GAC/B/B,KAAKgC,0BACT,GAAC,CAAAtB,IAAA,gBAAAC,MAED,WACIX,KAAKkB,UAAUY,MAAMC,QAAU,OAC/B/B,KAAKgC,0BACT,GAAC,CAAAtB,IAAA,2BAAAC,MAED,WACI,IACM4B,EADiBC,EAAIxC,KAAKe,WAAW0B,UAAUC,QAAO,SAAAC,GAAK,OAAIA,EAAMR,UAAUS,SAAS,aACrDC,QAAO,SAACC,EAAKH,GAAK,OAAKG,EAAMH,EAAMI,YAAY,GAAE,GACpFC,EAAkBhD,KAAKe,WAAWgC,aACxC/C,KAAKiB,aAAaa,MAAMmB,OAAMpC,eAAAA,OAAkBmC,EAAkBT,EAAsB,MAC5F,GAAC,CAAA7B,IAAA,wBAAAC,MAED,WACIX,KAAKgC,2BACLhC,KAAKkD,wBACLC,QAAQC,IAAI,oBAChB,GAAC,CAAA1C,IAAA,wBAAAC,MAED,WACI,IAAM0C,EAAiBrD,KAAKoB,WAAWa,YAAYV,OAE7C+B,EADWC,WAAWC,iBAAiBxD,KAAKoB,YAAYqC,UAClCJ,EAAe1D,OAAS,GACpDK,KAAKoB,WAAWU,MAAMwB,SAAQzC,GAAAA,OAAMyC,EAAY,KACpD,GAAC,CAAA5C,IAAA,aAAAC,MAED,SAAW+C,GAAuC,IAA9BC,EAAIjE,UAAAC,OAAA,QAAAC,IAAAF,UAAA,GAAAA,UAAA,GAAG,MAAOW,EAAKX,UAAAC,OAAA,QAAAC,IAAAF,UAAA,GAAAA,UAAA,GAAG,OAChCkE,EAAaC,SAASC,cAAc,OAC1CF,EAAWzB,UAAU4B,IAAI,oBACzBH,EAAWzB,UAAU4B,IAAI/D,KAAKiB,aAAawB,SAAS9C,OAAS,GAAM,EAAI,qBAAuB,sBAE9F,IAAMqE,EAAUH,SAASC,cAAc,OACvCE,EAAQ/B,YAAc0B,EACtBK,EAAQlC,MAAK,4BAAAjB,OAA+BR,EAAsD,mDAElG,IAAM4D,EAAaJ,SAASC,cAAc,OAC1CG,EAAWnC,MAAK,4BAAAjB,OAA+BR,EAAQ,KACvD4D,EAAWhC,YAAcyB,EAEzBE,EAAWM,YAAYF,GACvBJ,EAAWM,YAAYD,GACvBjE,KAAKiB,aAAaiD,YAAYN,GAC9B5D,KAAKiB,aAAakD,UAAUC,iBAE5BpE,KAAKmB,UAAUR,MAAQ,GACvBX,KAAKgC,0BACT,GAAC,CAAAtB,IAAA,iBAAAC,MAED,SAAe0D,GACXrE,KAAKiB,aAAaqD,YAAYtE,KAAKiB,aAAawB,SAAS4B,GAC7D,GAAC,CAAA3D,IAAA,aAAAC,MAED,SAAW0D,GACP,OAAOrE,KAAKiB,aAAawB,SAAS4B,GAAGF,UAAUlC,WACnD,GAAC,CAAAvB,IAAA,gBAAAC,MAED,SAAc0D,EAAGX,GACb1D,KAAKiB,aAAawB,SAAS4B,GAAGF,UAAUlC,aAAeyB,CAC3D,GAAC,CAAAhD,IAAA,gBAAAC,MAED,SAAc0D,EAAGX,GACb1D,KAAKiB,aAAawB,SAAS4B,GAAGF,UAAUlC,YAAcyB,CAC1D,GAAC,CAAAhD,IAAA,cAAAC,MAED,SAAY4D,GACRvE,KAAKe,WAAWoB,UAAUqC,OAAOxE,KAAKH,OACtCG,KAAKe,WAAWoB,UAAU4B,IAAIQ,GAC9BvE,KAAKH,MAAQ0E,CACjB,IAAC,CA5JS"}